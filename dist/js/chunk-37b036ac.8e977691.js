(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-37b036ac"],{"082c":function(e,t,s){"use strict";var n=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"megbox"},[s("div",{staticClass:"top"},[s("Emoji",{ref:"emoji",attrs:{textConent:e.rename}}),s("el-form",{staticClass:"demo-form-inline",attrs:{inline:!0,model:e.ruleForm}},[s("el-form-item",{attrs:{prop:"name",label:"昵称",rules:e.rules.name}},[s("el-input",{attrs:{placeholder:"请输入昵称"},model:{value:e.ruleForm.name,callback:function(t){e.$set(e.ruleForm,"name",t)},expression:"ruleForm.name"}})],1),s("el-form-item",{attrs:{prop:"email",label:"邮箱",rules:e.rules.email}},[s("el-input",{attrs:{placeholder:"请输入邮箱"},model:{value:e.ruleForm.email,callback:function(t){e.$set(e.ruleForm,"email",t)},expression:"ruleForm.email"}})],1),s("el-form-item",[s("el-button",{attrs:{type:"primary"},on:{click:e.onSubmit}},[e._v("提交")])],1)],1)],1),s("h2",[e._v("内容区")]),s("div",{staticClass:"bottom"},[s("div",{staticClass:"block"},e._l(e.list,(function(t,n){return s("div",{key:n,staticClass:"timeline"},[s("p",[s("span",[e._v(e._s(t.megs.name))]),e._v(e._s(t.megs.createdAt)+" ")]),s("p",{staticClass:"content"},[e._v(e._s(t.megs.content))]),s("p",{staticClass:"reply",on:{click:function(s){return e.replyMessage(n,t.megs.name)}}},[e._v("回复")]),e._l(t.reply,(function(t,i){return s("div",{key:i,staticClass:"rep"},[s("svg",{staticClass:"icon inicon",attrs:{"aria-hidden":"true"}},[0==t.star?s("use",{attrs:{"xlink:href":"#icon-taidixiongwanoukeai"}}):e._e(),1==t.star?s("use",{attrs:{"xlink:href":"#icon-labixiaoxin-"}}):e._e()]),s("p",[s("span",[e._v(e._s(t.name))]),e._v(" "+e._s(t.createdAt)+" ")]),s("p",{staticClass:"content"},[e._v(e._s(t.content))]),s("p",{staticClass:"reply",on:{click:function(s){return e.replyMessage(n,t.name)}}},[e._v("回复")])])})),s("svg",{staticClass:"icon",attrs:{"aria-hidden":"true"}},[1==t.megs.star?s("use",{attrs:{"xlink:href":"#icon-labixiaoxin-"}}):e._e(),0==t.megs.star?s("use",{attrs:{"xlink:href":"#icon-taidixiongwanoukeai"}}):e._e()]),s("div",{staticClass:"line"})],2)})),0)])])},i=[],o=(s("b0c0"),s("ac1f"),s("1276"),s("bbe3")),a=s("365c"),r=(s("5a89"),{data:function(){return{ruleForm:{},oneMeg:{type:1,star:0},rules:{name:[{required:!0,message:"请输入昵称",trigger:"blur"},{min:1,max:255,message:"长度在 1 到 255 个字符",trigger:"blur"}],email:[{required:!0,message:"请输入邮箱地址",trigger:"blur"},{type:"email",message:"请输入正确的邮箱地址",trigger:["blur","change"]}]},content:[],rename:"",uid:"",reindex:0}},props:{list:{type:Array,default:function(){return[]}},type:{default:"1"}},methods:{onSubmit:function(){var e=this;if(this.$refs.emoji.referContent(),this.content=this.$refs.emoji.content,0!==this.content.length){if(this.oneMeg.name=this.ruleForm.name,this.oneMeg.email=this.ruleForm.email,!this.ruleForm.name)return alert("请输入昵称");if(!this.ruleForm.email)return alert("请输入邮箱");this.oneMeg.content=this.content[this.content.length-1],this.oneMeg.type=this.type,""==this.rename?(Object(a["f"])(this.oneMeg).then((function(t){t&&(console.log(t),"200"==t.code?(e.$message({message:"发布成功",type:"success",duration:1e3}),e.list.unshift({megs:e.oneMeg})):e.$message({showClose:!0,message:"发布失败",type:"error",duration:1e3}))})).catch((function(e){console.log(e),this.$message({showClose:!0,message:"发布失败",type:"error",duration:1e3})})),this.clearInfo()):(this.oneMeg.name+=this.rename,this.oneMeg.uid=this.uid,console.log("回复this.oneMeg:",this.oneMeg),Object(a["p"])(this.oneMeg).then((function(t){t&&(console.log("回复别人的信息res",t),"200"==t.code?(e.$message({message:"发布成功",type:"success",duration:1e3}),console.log("megBox.vue中的this.list.reply回复留言",e.list.reply),e.list[e.reindex].reply.push(e.oneMeg)):e.$message({showClose:!0,message:"发布失败",type:"error",duration:1e3}))})).catch((function(e){console.log(e),this.$message({showClose:!0,message:"发布失败",type:"error",duration:1e3})})),this.clearInfo())}},replyMessage:function(e,t){this.rename="",console.log("回复的那一条的索引:",e),this.reindex=e;var s=t.split("@")[0];console.log("n的值",s),this.rename="@".concat(s),console.log("rename的值",this.rename),this.uid=this.list[e].megs.id,console.log("回复的那一条留言的uid",this.uid)},clearInfo:function(){this.ruleForm.name="",this.ruleForm.email="",this.rename=""}},components:{Emoji:o["a"]}}),l=r,c=(s("7d37"),s("2877")),m=Object(c["a"])(l,n,i,!1,null,"213481d0",null);t["a"]=m.exports},"0e35":function(e,t,s){e.exports=s.p+"img/meg.78ec6734.gif"},"3a1c":function(e,t,s){"use strict";s("f192")},"7d37":function(e,t,s){"use strict";s("c509")},"8e2a":function(e,t,s){"use strict";s.r(t);var n=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"mesg animate__animated animate__fadeInLeft"},[s("img",{attrs:{src:e.megUrl,alt:""}}),s("h2",[e._v("欢迎大家留言啊 , 一起进步!(｡･∀･)ﾉﾞ")]),s("MegBox",{attrs:{list:e.content,type:1}})],1)},i=[],o=s("365c"),a=s("0e35"),r=s.n(a),l=s("082c"),c={name:"Message",data:function(){return{content:[],megUrl:r.a}},components:{MegBox:l["a"]},created:function(){var e=this;Object(o["o"])(1).then((function(t){console.log("总的留言板,type设置为1：",t),e.content=t.data,console.log("Message.box中的content",e.content)})).catch((function(e){console.log(e)}))}},m=c,u=(s("3a1c"),s("2877")),g=Object(u["a"])(m,n,i,!1,null,"24c64688",null);t["default"]=g.exports},c509:function(e,t,s){},f192:function(e,t,s){}}]);
//# sourceMappingURL=chunk-37b036ac.8e977691.js.map